/*!
* PersianDate - v0.7.1 - 2016-12-10
* https://github.com/brothersincode/persiandate
* Licensed: MIT
*/
(function(a,c,b){if(typeof module!="undefined"){module.exports=b()}else{if(typeof define=="function"&&typeof define.amd=="object"){define(b)}else{if(typeof window!="undefined"){window[a]=b()}else{c[a]=b()}}}}("PersianDate",this,function(){function a(k,i,c,n,f,o,e){this.gD;this.jD;this.o={};this.def={debug:!1,translate_numbers:!1,};if(!k){this._init({});this.setFullDate()}else{if(k instanceof Date){this._init({});this.setFullDate(k)}else{if(k instanceof Object){this._init(k);this.setFullDate()}else{if(typeof(k)=="boolean"){this.isJalali=k;this._init({});this.setFullDate()}else{if(typeof(k=="number")){var l=parseInt(k,10);var b=parseInt(i,10);var j=parseInt(c,10);l+=this.d(b,12);b=this.m(b,12);var h=this.jalali_to_gregorian([l,b,j]);this._init({});this.setFullDate(new Date(h[0],h[1],h[2]))}else{if(k instanceof Array){throw new "PersianDate(Array) is not implemented yet!"}else{this._init({});this.setFullDate(k)}}}}}}}a.prototype.setDate=function(c){this.jD[2]=c;var b=this.jalali_to_gregorian(this.jD);this.gD=new Date(b[0],b[1],b[2]);this.jD=this.gregorian_to_jalali([b[0],b[1],b[2]]);return this};a.prototype.setHours=function(b){return this.gD.setHours(b)};a.prototype.setMinutes=function(b){return this.gD.setMinutes(b)};a.prototype.setSeconds=function(b){return this.gD.setSeconds(b)};a.prototype.setMilliseconds=function(b){return this.gD.setMilliseconds(b)};a.prototype.getFullYear=function(){return this.jD[0]};a.prototype.getMonth=function(){return this.jD[1]};a.prototype.getDate=function(){return this.jD[2]};a.prototype.toString=function(){return this.jD.join(",").toString()};a.prototype.getDay=function(){return this.gD.getDay()};a.prototype.getHours=function(){return this.gD.getHours()};a.prototype.getMinutes=function(){return this.gD.getMinutes()};a.prototype.getSeconds=function(){return this.gD.getSeconds()};a.prototype.getTime=function(){return this.gD.getTime()};a.prototype.getTimeZoneOffset=function(){return this.gD.getTimeZoneOffset()};a.prototype.getYear=function(){return this.jD[0]%100};a.prototype.setFullDate=function(b){if(b instanceof a){b=b.getGregorianDate()}this.gD=new Date(b);this.gD.setHours(this.gD.getHours()>12?this.gD.getHours()+2:0);if(!this.gD||this.gD=="Invalid Date"||isNaN(this.gD)||!this.gD.getDate()){this.gD=new Date()}this.jD=this.gregorian_to_jalali([this.gD.getFullYear(),this.gD.getMonth(),this.gD.getDate()]);this.log(this.gD.toString());this.log(this.jD);return this};a.prototype.getGregorianDate=function(){return this.gD};a.prototype.calculateWeek=function(b){var c=new this(b.getFullYear(),b.getMonth(),b.getDate()+(b.getDay()||7)-3);return this.d(Math.round((c.getTime()-new this(c.getFullYear(),0,1).getTime())/86400000),7)+1};a.prototype.log=function(){if(this.o.debug){console.log.apply("",arguments)}};a.prototype._init=function(b){for(var c in b){if(b.hasOwnProperty(c)){this.def[c]=b[c]}}this.o=this.def};a.prototype.fromISOString=function(d){var b=(new Date).getTimezoneOffset();var c=d.substr(10).match(/([\-\+])(\d{1,2}):?(\d{1,2})?/)||0;if(c){c=b+(c[1]=="-"?-1:1)*(c[3]!=null?+c[2]*60+(+c[3]):+c[2])}return this.fastDateParse.apply(c||0,d.split(/\D/))};a.prototype.fastDateParse=function(k,b,j,g,e,f,c){return new Date(k,b-1,j,g||0,+(e||0)-this,f||0,c||0)};a.prototype.toPersianDigit=function(b){var c="۰".charCodeAt(0);return b.toString().replace(/\d+/g,function(d){return d.split("").map(function(e){return String.fromCharCode(c+parseInt(e))}).join("")})};a.prototype.toEnglishDigit=function(b){return b.toString().replace(/[۱۲۳۴۵۶۷۸۹۰]+/g,function(c){return c.split("").map(function(d){return d.charCodeAt(0)%1776}).join("")})};a.prototype.jalali_to_gregorian=function(e){var c=0;if(e[1]<0){c=this.lP(e[0]-1)?30:29;e[1]++}var b=this.jd2g(this.p2jd(e[0],e[1]+1,e[2])-c);b[1]--;return b};a.prototype.gregorian_to_jalali=function(c){var b=this.jd2p(this.g2jd(c[0],c[1]+1,c[2]));b[1]--;return b};a.prototype.GE=1721425.5;a.prototype.IE=1948439.5;a.prototype.PE=1948320.5;a.prototype.d=function(d,c){return Math.floor(d/c)};a.prototype.m=function(d,c){return d-this.d(d,c)*c};a.prototype.lG=function(b){return((b%4)==0)&&(!(((b%100)==0)&&((b%400)!=0)))};a.prototype.g2jd=function(c,d,b){return(this.GE-1)+(365*(c-1))+this.d((c-1),4)+(-this.d((c-1),100))+this.d((c-1),400)+Math.floor((((367*d)-362)/12)+((d<=2)?0:(this.lG(c)?-1:-2))+b)};a.prototype.jd2g=function(k){var h,n,f,c,m,b,o,d,g,l,i,e,j;h=Math.floor(k-0.5)+0.5;n=h-this.GE;f=this.d(n,146097);c=this.m(n,146097);m=this.d(c,36524);b=this.m(c,36524);o=this.d(b,1461);d=this.m(b,1461);g=this.d(d,365);i=(f*400)+(m*100)+(o*4)+g;if(!((m==4)||(g==4))){i++}e=h-this.g2jd(i,1,1);j=((h<this.g2jd(i,3,1))?0:(this.lG(i)?1:2));month=this.d((((e+j)*12)+373),367);day=(h-this.g2jd(i,month,1))+1;return[i,month,day]};a.prototype.lI=function(b){return(((b*11)+14)%30)<11};a.prototype.i2jd=function(c,d,b){return(b+Math.ceil(29.5*(d-1))+(c-1)*354+Math.floor((3+(11*c))/30)+this.ISLAMIC_EPOCH)-1};a.prototype.jd2i=function(b){var d,e,c;b=Math.floor(b)+0.5;d=this.d(((30*(b-ISLAMIC_EPOCH))+10646),10631);e=Math.min(12,Math.ceil((b-(29+this.i2jd(d,1,1)))/29.5)+1);c=(b-this.i2jd(d,e,1))+1;return[d,e,c]};a.prototype.lP=function(b){return((((((b-((b>0)?474:473))%2820)+474)+38)*682)%2816)<682};a.prototype.p2jd=function(c,f,b){var e,d;e=c-((c>=0)?474:473);d=474+this.m(e,2820);return b+((f<=7)?((f-1)*31):(((f-1)*30)+6))+this.d(((d*682)-110),2816)+(d-1)*365+this.d(e,2820)*1029983+(this.PE-1)};a.prototype.jd2p=function(k){var i,h,j,l,f,b,g,e,d,c;k=Math.floor(k)+0.5;l=k-this.p2jd(475,1,1);f=this.d(l,1029983);b=this.m(l,1029983);if(b==1029982){g=2820}else{e=this.d(b,366);d=this.m(b,366);g=this.d(((2134*e)+(2816*d)+2815),1028522)+e+1}i=g+(2820*f)+474;if(i<=0){i--}c=(k-this.p2jd(i,1,1))+1;h=(c<=186)?Math.ceil(c/31):Math.ceil((c-6)/30);j=(k-this.p2jd(i,h,1))+1;return[i,h,j]};return a}));